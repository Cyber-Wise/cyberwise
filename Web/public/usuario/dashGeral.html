<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
  <link rel="icon" href="../assets/logoCWpreta.png" />
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Chakra+Petch:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&family=Rubik:ital,wght@0,300..900;1,300..900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../css/dashGeral.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../css/chatbot.css">
    <!-- <script src="path/to/chartjs/dist/chart.umd.js"></script> -->
    <title>CyberWise | Dashboard Geral</title>
</head>
<body>
    <div id="boxVerAbrirAlerta" class="boxVerMais">
        <header>
            <h2>Lista de computadores</h2>
            <button onclick="fecharVerMaisAlerta()" class="btnFecha">X</button>
        </header>
        <ul id="listaPcAlerta">
           
        </ul>
    </div>
   <div class="sobrepor">
    <div class="menuLateral">
        
        <header>
            <img src="../assets/logoCWbranca.png" alt="">
            <div class="headerLinks">
                <a href="./perfil.html" class="botaoVoltarPerfil"><i class='bx bxs-user'></i></a>
            </div>
        </header>

        <div id="chat" class="chatbot">
            <header class="headerChatBot">
                <h3>Chat CyberWise</h3>
            </header>
            <ul class="chatbox">
                
                <li id="chat-container"></li>
            </ul>
            <div class="input_usuario">
                <input type="text" id="input-usuario" placeholder="Digite aqui...">
                <button id="botao-enviar">Enviar</button>
            </div>
        </div>
        <button class="btnChat"><img src="../assets/icons8-chatbot-30.png" alt=""> <a href="127.0.0.1:5000"></a></button>
        <p class="descricaoHrAtualizacao">Dados sendo atualizados de 5 em 5 segundos</p>

        <div class="notification">
            <div class="centerSlack">
                <i class='bx bxs-bell-ring' ></i>
                <a href="https://slack.com/intl/pt-br" class="btnSlack">Ir para o slack</a>
            </div>
            <ul id="listaDeNotificacao">
                
            </ul>
        </div>
        <div id="informationBox" class="boxInformationAlerts">
            <div class="information"><i class='bx bx-laptop emergencia'></i><p class="nomeInfo">Emergência</p></div>
            <div class="information"><i class='bx bx-laptop alerta'></i><p class="nomeInfo">Alerta</p></div>
            <div class="information"><i class='bx bx-laptop normal'></i><p class="nomeInfo">Normal</p></div>
        </div>
        
        <div class="listaDeComputadores">
         
            <header>
                <button  class="filtro">filtrar<div id="boxFiltros" class="boxFiltros">
                    <select name="" id="selectFiltro" onclick="abrirFiltros()">
                        <option class="btnOption"  value="todos">Todos</option>
                        <option class="btnOption"  value="emergencia">Emergência</option>
                        <option class="btnOption" value="alerta">Alerta</option>
                        <option class="btnOption" value="normal">Normal</option>
                    </select>
                </div></button>
                <button onclick="infoFiltro(), pegarData()" class="infoFiltro"><i class='bx bxs-info-circle'></i></button>
            </header>
            
            <ul id="listaFiltroPc">
                <!-- lista de computadores -->
            </ul>
        </div>
    </div>
    <div class="dashboard">
        <h2 class="titulo">DASHBOARD GERAL</h2>
        <div class="container">
            <div class="item1">
                <div class="flex1">
                    <h3 class="descricaoCards">Total de máquinas</h3>
                    <h3 class="tituloCards"><span id="qntMaquinas"></span></h3>
                
                </div>
            </div>
            <div class="item2">
                
                    <h3 class="tituloCards"><span id="idMaquinasPoucoEspaco"></span></h3>
                    <p class="descricaoCards" >Máquinas com pouco espaço</p>
               
                <button onclick="abrirlistaDisco()" class="btnVerMais">Ver mais</button>
            </div>
            <div class="item3">
                <div class="divFlex">
                    <h3 class="tituloCards"><span id="idMaquinasPoucaMemoria"></span></h3>
                <p class="descricaoCards">Máquinas com pouca memória RAM</p>
                </div>
                <button onclick="abrirlistaRam()" class="btnVerMais">Ver mais</button>
            </div>
        </div>
        <div class="container2">
            <div class="item4">
                <h3 class="tituloCards"><span id="componentesCriticos"></span></h3>
                <p class="descricaoCards">Máquinas com componentes em estado crítico</p>
               
            </div>
            <div class="item5">
                <h3 class="tituloCards"><span id="componentesAlerta"></span></h3>
                <p class="descricaoCards">Máquinas com componentes em estado de alerta</p>
              
            </div>
        </div>
        <div class="container3">
            <div class="item6">
                <div class="titulos">
                <p>Modelo:N° série</p>
                <p>N° de alertas na CPU</p>
                <p>N° de alertas da memoria</p>
                <p>N° de alertas do disco</p>
                <p>N° de alertas da rede</p>
                </div>
                <ul id="tabelaAlertas">
                    <!-- <li><p class="descricaoTabela">Dell: 1222</p><p class="descricaoTabela">2</p><p class="descricaoTabela">10</p><p class="descricaoTabela">5</p><p class="descricaoTabela">0</p></li> -->
                </ul>
                
            </div>
                
                <div class="item7">
                    <h3 class="tituloCards"><span id="redeComProblema"></span></h3>
                    <p class="descricaoCards">Máquinas com problemas de rede</p>
                    <button onclick="abrirlistaRede()" class="btnVerMais">Ver mais</button>
            </div>
        </div>
    </div>
   </div>
</body>
</html>
<script src="../JsDashboard/dashGeral.js"></script>
<script src="../JsDashboard/chatbot.js"></script>
<!-- <script src="../JsDashboard/dash.js"></script> -->
<script>
    function abrirChat (){
        if(chat.style.display == 'none'){
    
          chat.style.display = 'block'
        }else {
          chat.style.display = 'none'
    
        }
    }
 window.onload = maquinasEmpresa()
   window.onload = totalDeMaquinas()
   window.onload = componentesEmEstadoCritico()
   window.onload = maquinasComPoucaRam()
window.onload = listaDeAlertas()
window.onload = maquinasComPoucoEspaco()
   window.onload = notificacao()
   window.onload = componentesEmEstadoAlerta()
window.onload = maquinasComProblemasDeRede()

    setInterval(componentesEmEstadoAlerta, 5000);
    setInterval(componentesEmEstadoCritico, 5000);
    setInterval(maquinasComPoucaRam, 5000);
    setInterval(listaDeAlertas, 5000);
    setInterval(maquinasComPoucoEspaco, 5000);
    setInterval(notificacao, 5000);
    setInterval(maquinasComProblemasDeRede, 5000);




    var sobrepor = document.querySelector(".sobrepor")

    function abrirlistaDisco(){
        boxVerAbrirAlerta.style.display = "block"
        sobrepor.style.filter = "blur(2px)"
        sobrepor.style.opacity = 0.2;
        listaDeMaquinasComPoucoEspaco()

    }
    function abrirlistaRam(){
        boxVerAbrirAlerta.style.display = "block"
        sobrepor.style.filter = "blur(2px)"
        sobrepor.style.opacity = 0.2;
        listaDeMaquinasComPoucaRam()

    }
    function abrirlistaRede(){
        boxVerAbrirAlerta.style.display = "block"
        sobrepor.style.filter = "blur(2px)"
        sobrepor.style.opacity = 0.2;
        listaDeMaquinasProblemaRede()

    }
    function abrirListaPcCritico(){
        boxVerAbrirAlerta.style.display = "block"
        sobrepor.style.filter = "blur(2px)"
        sobrepor.style.opacity = 0.2;
        listaDeMaquinasCOmComponentesCriticos()

    }
    function abrirListaPcAlerta(){
        boxVerAbrirAlerta.style.display = "block"
        sobrepor.style.filter = "blur(2px)"
        sobrepor.style.opacity = 0.2;
        listaDeMaquinasCOmComponentesAlertas()

    }
    function fecharVerMaisAlerta(){
        boxVerAbrirAlerta.style.display = "none"
        sobrepor.style.opacity = 1
        sobrepor.style.filter = "blur(0px)"
        listaPcAlerta.innerHTML = ''

    }

    function infoFiltro() {
        boxFiltros
        // Supondo que "informationBox" seja o ID do elemento que você deseja exibir/ocultar
        var informationBox = document.getElementById("informationBox");
    
        if (informationBox.style.display === "none" || informationBox.style.display === "") {
            informationBox.style.display = 'block';
        } else {
            informationBox.style.display = 'none';
        }

       

    }

    function abrirFiltros(){
        var filtro = selectFiltro.value;
       // console.log(filtro);

        let alerta = document.querySelectorAll('.Parametroalerta');
        let normal = document.querySelectorAll('.Parametronormal');
        let emergencia = document.querySelectorAll('.Parametroemergencia');
        let todos = document.querySelectorAll('.todos');

        switch(filtro){
            case "emergencia": 
            alerta.forEach(function(elemento) {
                elemento.style.display = 'none';
            });
            normal.forEach(function(elemento) {
                elemento.style.display = 'none';
            });
            emergencia.forEach(function(elemento) {
                elemento.style.display = 'flex';
            });
            break;
            case "alerta": 
            emergencia.forEach(function(elemento) {
                elemento.style.display = 'none';
            });
            normal.forEach(function(elemento) {
                elemento.style.display = 'none';
            });
            alerta.forEach(function(elemento) {
                elemento.style.display = 'flex';
            });
            break;
            case "normal":
            alerta.forEach(function(elemento) {
                elemento.style.display = 'none';
            });
            emergencia.forEach(function(elemento) {
                elemento.style.display = 'none';
            });
            normal.forEach(function(elemento) {
                elemento.style.display = 'flex';
            });
            break;
            case "todos":
            alerta.forEach(function(elemento) {
                elemento.style.display = 'flex';
            });
            emergencia.forEach(function(elemento) {
                elemento.style.display = 'flex';
            });
            normal.forEach(function(elemento) {
                elemento.style.display = 'flex';
            });
            break;

            
           

        }

        
    }

    function pegarData(){
        var dataAtual = new Date();

        
        var dia = dataAtual.getDate(); 
        var mes = dataAtual.getMonth() + 1; 
        var ano = dataAtual.getFullYear(); 

        
        var hora = dataAtual.getHours(); 
        var minutos = dataAtual.getMinutes(); 
        var segundos = dataAtual.getSeconds(); 

        
        var dataHoraFormatada = dia + '/' + mes + '/' + ano + ' ' + hora + ':' + minutos + ':' + segundos;

        console.log(dataHoraFormatada); 
    }



    function abrirFiltros(){
        var filtro = selectFiltro.value;

        let alerta = document.querySelectorAll('.Alerta');
        let normal = document.querySelectorAll('.Normal');
        let emergencia = document.querySelectorAll('.Emergencia');

        switch(filtro){
            case "emergencia": 
            alerta.forEach(function(elemento) {
                elemento.style.display = 'none';
            });
            normal.forEach(function(elemento) {
                elemento.style.display = 'none';
            });
            emergencia.forEach(function(elemento) {
                elemento.style.display = 'flex';
            });
            break;
            case "alerta": 
            emergencia.forEach(function(elemento) {
                elemento.style.display = 'none';
            });
            normal.forEach(function(elemento) {
                elemento.style.display = 'none';
            });
            alerta.forEach(function(elemento) {
                elemento.style.display = 'flex';
            });
            break;
            case "normal":
            alerta.forEach(function(elemento) {
                elemento.style.display = 'none';
            });
            emergencia.forEach(function(elemento) {
                elemento.style.display = 'none';
            });
            normal.forEach(function(elemento) {
                elemento.style.display = 'flex';
            });
            break;
            case "todos":
            alerta.forEach(function(elemento) {
                elemento.style.display = 'flex';
            });
            emergencia.forEach(function(elemento) {
                elemento.style.display = 'flex';
            });
            normal.forEach(function(elemento) {
                elemento.style.display = 'flex';
            });
            break;

            
           

        }

        
    }
</script>