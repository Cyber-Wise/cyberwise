<!DOCTYPE html>
<html lang="pt-br">


<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>CyberWise | Perfil</title>
  <link rel="icon" href="../assets/logoCWpreta.png" />
  <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <link rel="stylesheet" href="../css/perfil.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="stylesheet" href="../css/chatbot.css">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet">
  
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Chakra+Petch:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400;1,500;1,600;1,700&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&family=Rubik:ital,wght@0,300..900;1,300..900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../css/menu_lateral.css">
    <script src="../js/sessao.js"></script>
    <link rel="stylesheet" href="../css/headerPerfil.css">
    <link rel="stylesheet" href="../css/gerenciar.css">

    <!-- <script src="sweetalert2.min.js"></script> -->
    <script src="../../node_modules/sweetalert2/dist/sweetalert2.all.min.js"></script>
    <!-- <link rel="stylesheet" href="sweetalert2.min.css"> -->
</head>

<body>
<!-- <script src="../JsDashboard/perfilFuncoes.js"></script> -->
   
    <main>
        <div class="modalPerfil" id="perfilModal">
            <button onclick="fecharModal()" id="fecharModal">X</button>
            <div class="centerModal">
                <img src="" id="perfilImgModal">
                <input type="file" class="uploadDeFoto" id="uploadInput">
                <button class="btnPerfilImg" onclick="handleSalvarFoto()" id="btnSalvarFoto">Salvar Imagem</button>
                <img src="../assets/loading.gif" alt="" id="loading">
            </div>
        </div>
        <div class="globalFuncionario" id="globalFuncionario">
            <button onclick="abrir()" id="addFunc" class="btnFuncionario">Adicionar Funcionário<i class='bx bx-add-to-queue'></i></button>
            <div id="sumiuPesquisa">
                <div class="headerGerenciar">
                    <div class="container">
                        <div class="pesquisaDiv"><p>Pesquisar funcionário:</p>
                            <div class="search">
                                <input type="search" placeholder="Pesquisar" id="buscarFuncionarios" onkeyup="filtrar('buscarFuncionarios', 'listaFuncionarios', 'funcionarioNome')">
                                <!-- <p><i class='bx bx-search-alt'></i></p> -->
                            </div>
                        </div>
                            <button onclick="fecharFuncionarios()" class="btnFecha"><i class='bx bx-window-close'></i></button>

                    </div>
                     
                    </div>
                    <div class="corpoGerenciar">
                      <ul class="listaDeFuncionarios" id="listaFuncionarios">
                          <!-- <li>
                              <p class="funcionarioNome">Claudio Frizza</p>
                              <p class="funcionarioEmail">claudiofrizza@empresa.com</p>
                              <div class="botaosGerenciar">
                                  <button><i class='bx bx-trash-alt' onclick="poeaiDavi"></i></button>
                                  <button onclick="abrirEditar()"><i class='bx bxs-edit-alt'></i></button>
                              </div>
                          </li> -->
                          
                      </ul>
                    </div> 
            </div>
            <div id="divFuncionario" class="cadastroDeFuncionario">
                <button onclick="fechar()" class="fechar"><i class='bx bx-window-close'></i></button>
                <h2 class="tituloFuncionarios" style="color: #fff;">Cadastrar Funcionário</h2>
                <div class="funcLabel">
                    <p>Nome:</p>
                    <input type="text" class="inputCadastrar" id="nomeFuncionario">
                </div>
                <div class="funcLabel">
                    <p>E-mail:</p>
                    <input type="email" class="inputCadastrar" id="emailFuncionario">
                </div>
                <div class="funcLabel">
                    <p>Senha:</p>
                    <input type="password" class="inputCadastrar" id="senhaFuncionario">
                </div>
                <div class="funcLabel">
                    <p>Confirmar senha:</p>
                    <input type="password" class="inputCadastrar" id="confirmarSenhaFuncionario">
                </div>
                <div class="funcLabel">
                    <p>Cargo:</p>
                    <select name="" id="cargoFuncionario">
                        <option value="0">Selecione um cargo</option>
                        <option value="2">Gerente</option>
                        <option value="3">Funcionário</option>
                    </select>
                </div>
                <button class="btnCadastrar" onclick="cadastrarFuncionario()">Cadastrar</button>
            </div>
            <div id="editarFuncionario" class="cadastroDeFuncionario">
                <button onclick="fecharEditar()" class="fechar"><i class='bx bx-window-close'></i></button>
                <h2 class="tituloFuncionarios" style="color: #fff;">Editar Funcionário</h2>
                <p><span id="nomeEditarFuncionario"></span></p>
                <div class="funcLabel">
                    <p>E-mail:</p>
                    <input type="email" class="inputCadastrar" id="emailEditarFuncionario">
                </div>
                <div class="funcLabel">
                    <p>Senha:</p>
                    <input type="text" class="inputCadastrar" id="senhaEditarFuncionario">
                </div>
                <div class="funcLabel" id="selectCargo">
                    
                </div>
                <button class="btnCadastrar" onclick="atualizarFuncionario()">Atualizar Funcionário</button>
            </div>
        </div>

<!-- 222222222222222222222222222222222222222222222222 -->

<div class="globalFuncionario" id="globalMaquinas">
<button onclick="abrir2()" id="addMaquina" class="btnFuncionario">Adicionar máquinas<i class='bx bx-add-to-queue'></i></button>
<div id="sumiuPesquisa2">
    <div class="headerGerenciar">
        <div class="container">
            <div class="pesquisaDiv"><p>Pesquisar máquina:</p>
                <div class="search">
                    <input placeholder="Pesquisar" type="search" id="buscarMaquinas" onkeyup="filtrar('buscarMaquinas', 'listaMaquinas', 'maquinanome')">
                    <!-- onkeyup="filtrar('buscarMaquinas', 'listaMaquinas', 'maquinaNome')" -->
                    <!-- <p><i class='bx bx-search-alt'></i></p> -->
                </div></div>
                <button onclick="fecharMaquinas()" class="btnFecha"><i class='bx bx-window-close'></i></button>

        </div>
         
        </div>
        <div class="corpoGerenciar">
          <ul class="listaDeFuncionarios" id="listaMaquinas">

          </ul>
        </div> 
</div>
<div id="divMaquina" class="cadastroDeFuncionario">
    <button onclick="fechar2()" class="fechar"><i class='bx bx-window-close'></i></button>
    <h2 class="tituloFuncionarios" style="color: #fff;">Cadastrar máquinas</h2>
    <div class="funcLabel" >
        <p>Modelo:</p>
        <input type="text" class="inputCadastrar" id="modeloCadastrarPc">
    </div>
    <div class="funcLabel">
        <p>Código de acesso:</p>
        <input type="email" class="inputCadastrar" id="numSerieCadastrarPc">
        <div id="mensagemErro" class="mensagemErro"></div>
    </div>
    <div class="funcLabel">
        <p>Parâmetros:</p>
        <select id="selectParametros" class="inputCadastrar">
            <option value="default">escolha o parâmetro</option>

        </select>
    </div>
    <button class="btnCadastrar" onclick="cadastrarMaquina()">Cadastrar Maquina</button>
</div>
<div id="editarMaquina" class="cadastroDeFuncionario">
    <button onclick="fecharEditar2()" class="fechar"><i class='bx bx-window-close'></i></button>
    <h2 class="tituloFuncionarios" style="color: #fff;">Editar máquina</h2>
    <div class="funcLabel" >
        <p>Modelo:</p>
        <input type="text" id="modeloEditar" class="inputCadastrar">
    </div>
    <div class="funcLabel numeroSerieEditar">
        <p>Código de acesso:</p>
        <!-- <input type="text" class="inputCadastrar"> -->
    </div>
    <span id="numeroSerieEditar"></span>
    <div class="funcLabel" id="">
        <!-- <select id="selectParametro" class="inputCadastrar">
            <option value="0">escolha o parametro</option>

        </select>         -->
    </div>
    <button class="btnCadastrar" onclick="atualizarMaquina()">Atualizar máquina</button>
</div>
</div>

<!-- 33333333333333333333333333333 -->

<div class="globalFuncionario" id="globalParametros">
<button id="addParametro" onclick="abrir3()" class="btnFuncionario">Adicionar Parâmetros<i class='bx bx-add-to-queue'></i></button>
<div id="sumiuPesquisa3">
    <div class="headerGerenciar">
        <div class="container">
            <div class="pesquisaDiv"><p>Pesquisar parâmetros:</p>
                <div class="search">
                    <input type="search" placeholder="Pesquisar" id="buscarParametros" onkeyup="filtrar('buscarParametros', 'listaParametros', 'nomeParametro')">
                    
                </div></div>
                <button onclick="fecharParametros()" class="btnFecha"><i class='bx bx-window-close'></i></button>

        </div>
         
        </div>
        <div class="corpoGerenciar">
          <ul class="listaDeParametros" id="listaParametros">
              
          </ul>
        </div> 
</div>
<div id="divParametro" class="cadastroDeFuncionario">
    <button onclick="fechar3()" class="fechar"><i class='bx bx-window-close'></i></button>
    <h2 class="tituloFuncionarios" style="color: #fff;">Cadastrar parâmetros</h2>
    <div class="funcLabel">
        <p>Nome do Parâmetro:</p>
        <input type="text" id="nomeParametro" class="inputCadastrar">
    </div>
    <div class="globalFlex">
        <div class="displayFlex">
            <div class="funcLabel">
                <p>CPU crítico (%):</p>
                <input type="number" id="cpuCritico1" class="inputCadastrar">
            </div>
            <div class="funcLabel">
                <p>CPU alerta (%): </p>
                <input type="number" id="cpuAlerta1" class="inputCadastrar">
            </div>
        </div>
        <div class="displayFlex">
            <div class="funcLabel">
                <p>RAM crítica (%):</p>
                <input type="number" id="ramCritico1" class="inputCadastrar">
            </div>
            <div class="funcLabel">
                <p>RAM alerta (%):</p>
                <input type="number" id="ramAlerta1" class="inputCadastrar">
            </div>
            
        </div>
        <div class="displayFlex"><div class="funcLabel">
            <p>Disco crítico (GB):</p>
            <input type="number" id="discoCritico1" class="inputCadastrar">
        </div>
        <div class="funcLabel">
            <p>Disco alerta (GB):</p>
            <input type="number" id="discoAlerta1" class="inputCadastrar">
        </div></div>
    </div>
    <button class="btnCadastrar" onclick="cadastrarParametro()">Cadastrar Parâmetro</button>
</div>

<!-- aa -->
<div id="editarParametro" class="cadastroDeFuncionario">
    <button onclick="fecharEditar3()" class="fechar"><i class='bx bx-window-close'></i></button>
    <h2 class="tituloFuncionarios" style="color: #fff;">Editar parâmetros</h2>
    <div class="funcLabel">
        <p>Nome do Parâmetro:</p>
        <input type="text" id="nomeParametroEditar" class="inputCadastrar">
    </div>
    <div class="globalFlex">
        <div class="displayFlex">
            <div class="funcLabel">
                <p>CPU crítico (%):</p>
                <input type="number" id="cpuCriticoEditar" class="inputCadastrar">
            </div>
            <div class="funcLabel">
                <p>CPU alerta (%): </p>
                <input type="number" id="cpuAlertaEditar" class="inputCadastrar">
            </div>
        </div>
        <div class="displayFlex">
            <div class="funcLabel">
                <p>RAM crítica (GB):</p>
                <input type="number" id="ramCriticoEditar" class="inputCadastrar">
            </div>
            <div class="funcLabel">
                <p>RAM alerta (GB):</p>
                <input type="number" id="ramAlertaEditar" class="inputCadastrar">
            </div>
            
        </div>
        <div class="displayFlex"><div class="funcLabel">
            <p>Disco crítico (GB):</p>
            <input type="number" id="discoCriticoEditar" class="inputCadastrar">
        </div>
        <div class="funcLabel">
            <p>Disco alerta (GB):</p>
            <input type="number" id="discoAlertaEditar" class="inputCadastrar">
        </div></div>
    </div>
    <button class="btnCadastrar" onclick="atualizarParametro()">Editar Parâmetro</button>
</div>

</div> 
</div>

</div>
        <div class="sobrepor">
            <header class="cabecalho" style="background-color: #141728;">
                <div class="container_cabecalho">
                    <div class="container_logo">
                        <img src="../assets/logoCWbranca.png" alt="Logo da empresa CyberWise" class="logo_img">
                    </div>
                    <nav class="container_nav">
                        <ul>
                          <li><a href="./home.html" id="letraPreta">Home</a></li>
                          <li><a href="./dashGeral.html" id="letraPreta4">Dashboard</a></li>
                          <li><a href="./perfil.html" id="letraPreta5">Perfil</a></li>
                          <li><a id="letraPreta5" onclick="limparSessao()">Sair</a></li>
                        </ul>
                    </nav>
                    <button id="btnMenu">
                        <i class='bx bx-menu'></i>
                    </button>
                    <nav class="container_nav-mob" id="navBarMobile">
                        <ul>
                            <li><a href="./home.html">Home</a></li>
                            <li><a href="./dashGeral.html">Dashboard</a></li>
                            <li><a href="./perfil.html">Perfil</a></li>
                        </ul>
                    </nav>
                </div>
            </header>
            <div id="chat" class="chatbot">
                <header>
                    <h3>Chat CyberWise</h3>
                </header>
                <ul class="chatbox">
                    <p> Olá <br> </p>
                    <li id="chat-container"></li>
                </ul>
                <div class="input_usuario">
                    <input type="text" id="input-usuario" placeholder="Digite aqui...">
                    <button id="botao-enviar">Enviar</button>
                </div>
            </div>
           <button onclick="abrirChat()" id="btnChat" class="btnChatbot"><img src="../assets/icons8-chatbot-90.png" alt=""></button>
            <div class="divFoto">
            <img src="../assets/perfimImg.png" id="perfilImg">
            <button onclick="abrirEditPerfilFoto()" id="editFotoDePerfil"><i class='bx bxs-edit-alt'></i></button>
            
        </div>
        <div class="divNomeEempresa">
            <h4><span id="nomeDaConta"></span></h4>
            <h3><span id="nomeDaEmpresa"></span> </h3>
        </div>
        <div class="divPerfil">
            <div class="divInformacoesGerente">

                <button class="botaoEditar" id="botaoEditar" onclick="editar()"> Editar <img src="../assets/iconeEditar.png" alt="">
                </button>
                <button class="botaoEditar" id="botaoSalvar" onclick="salvarPerfil()" style="display: none;"> Salvar 
                </button>
                <div class="divInformacao">
                    <h3>Nome</h3>

                    <div class="divInformacoes" id="infoPerfil">
                      <span id="nomePerfil">Marcio da Costa Silva </span>
                    </div>
                    <input type="text" class="inputInformacoes" id="inputNome" style="display: none;" value="Davi Mendonça :/">
                </div>
                <hr>
                <div class="divInformacao">
                    <h3>Email</h3>

                    <div class="divInformacoes" id="infoPerfil1">
                       <span id="email"> email@email.com</span>
                    </div>
                    <input type="text" class="inputInformacoes" id="inputEmail" style="display: none;" value="davi.cyberwise@gmail.com">
                </div>
                <hr>
                <div class="divInformacao">
                    <h3>Senha</h3>

                    <div class="divInformacoes" id="infoPerfil2">
                        ***********
                    </div>
                    <input type="text" class="inputInformacoes" id="inputSenha" style="display: none;" value="davi_D_da_zl">
                </div>
            </div>
            <div class="infoEmpresaEBotoes">
                
                <!-- <div class="infoEmpresa" id="infoPerfil3">
                    <h1>Informações Empresa</h1>
                    <p>Lorem ipsum, dolor sit amet consectetur adipisicing elit. Iusto blanditiis ipsum reiciendis, tenetur non sed reprehenderit, quos ut quia et dignissimos voluptas, vero animi explicabo consectetur ex aliquam laudantium quam!</p>
                </div>
                <textarea name="" id="inputdesc" cols="30" rows="10" class="inputdescricao" ></textarea> -->
              

                <button class="botoesGerenciar" onclick="abrirFuncionarios(), validarCargoGerente()">
                    Gerenciar Funcionários
                </button>
                <button class="botoesGerenciar" onclick="abrirMaquinas()">
                    Gerenciar Máquinas
                </button>
                <button class="botoesGerenciar" onclick="abrirParametros()">
                    Gerenciar Parâmetros
                </button>
            </div>

</div>
<!-- sdaas -->
        </div>
    </div>
    </main>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

</body>
<script src="../js/header.js"></script>
<script src="../js/sessao.js"></script>
<script src="../JsDashboard/perfilFuncoes.js"></script>
<script>

    window.onload = funcionarios();
    window.onload = maquinas();
    window.onload = buscarParametros();
    window.onload = dadosPerfil();
    window.onload = validarCargo();
    window.onload = listaParametros();
    window.onload = foto();
    
  //  O nome do cargo do usuario ta no ===> sessionStorage.Cargo 
  // id no banco         nome no sessionStorage.cargo
  // 0                      Adiministrador
  // 1                      Gerente
  // 3                      Funcionário

  function validarCargoGerente(){
    if(sessionStorage.Cargo == 'Gerente'){
        globalFuncionario.style.marginTop = "70px"
        addFunc.style.display = 'none'
        let btnEdit = document.querySelectorAll(".editFunc")
        let btnRemove = document.querySelectorAll(".removeFunc")
        btnEdit.forEach(element=>{
            element.style.display = 'none'
        })
        btnRemove.forEach(element=>{
            element.style.display = 'none'
        })
    }
    
  }
function validarCargo(){
    if(sessionStorage.Cargo == 'Funcionário'){
        console.log("ola funcionario")
        let botoesDeFuncionario = document.querySelector(".infoEmpresaEBotoes")
        botoesDeFuncionario.style.display = 'none';
        botaoEditar.style.display = 'none';
    }
   
}

    function editar(){

        infoPerfil.style.display = "none";
        infoPerfil1.style.display = "none";
        infoPerfil2.style.display = "none";
        
        botaoEditar.style.display = "none";
        botaoSalvar.style.display = "flex";

        inputNome.style.display = "flex";
        inputEmail.style.display = "flex";
        inputSenha.style.display = "flex";

    }

    function salvar(){
        botaoEditar.style.display = "flex";
        botaoSalvar.style.display = "none";

    }

    var sobrepor = document.querySelector(".sobrepor")

    function abrir(){
        sumiuPesquisa.style.display = 'none'
        divFuncionario.style.display = 'block'
        addFunc.style.display = 'none'
    }
    function fechar(){
        sumiuPesquisa.style.display = 'block'
        divFuncionario.style.display = 'none'
        addFunc.style.display = 'block'
    }
    function abrirEditar(){
        sumiuPesquisa.style.display = 'none'
        editarFuncionario.style.display = 'block'
        addFunc.style.display = 'none'
    }
    function fecharEditar(){
        sumiuPesquisa.style.display = 'block';
        editarFuncionario.style.display = 'none';
        addFunc.style.display = 'block'
    }

    function abrirFuncionarios(){
        globalFuncionario.style.display = "block";
        sobrepor.style.filter = "blur(2px)";
        sobrepor.style.opacity = 0.2;

    }

    function abrirEditPerfilFoto(){
        var imgModal = document.getElementById('perfilImgModal')
        var imgPerfil = document.getElementById('perfilImg')
        imgModal.src = imgPerfil.src
        perfilModal.style.display = "block";
        sobrepor.style.filter = "blur(2px)";
        sobrepor.style.opacity = 0.2;

    }
    function fecharModal(){
        
        perfilModal.style.display = "none";
        sobrepor.style.filter = "blur(0px)";
        sobrepor.style.opacity = "1"; 
    }
    function fecharFuncionarios(){
        globalFuncionario.style.display = "none";
        sobrepor.style.filter = "blur(0px)";
        sobrepor.style.opacity = "1"; 
    }

    function abrirMaquinas(){
        globalMaquinas.style.display = "block";
        sobrepor.style.filter = "blur(2px)";
        sobrepor.style.opacity = 0.2;
    }

    function fecharMaquinas(){
        globalMaquinas.style.display = "none";
        sobrepor.style.filter = "blur(0px)";
        sobrepor.style.opacity = "1"; 
    }

    function abrir2(){
        if(parametro == 0){
            console.log('abrir funcionario deu certo')
                  const Toast = Swal.mixin({
                 toast: true,
                 position: "top-end",
                 showConfirmButton: false,
                 timer: 3000,
                 timerProgressBar: true,
                 didOpen: (toast) => {
                     toast.onmouseenter = Swal.stopTimer;
                     toast.onmouseleave = Swal.resumeTimer;
                 }
                 });
                 Toast.fire({
                 title: "Erro",
                 text: "Adicione um parâmetro!",
                 icon: "error",
                 color: "#fff",
                 background: "#011126",
                 iconColor : "red",
                 });
        }else{
            sumiuPesquisa2.style.display = 'none'
            divMaquina.style.display = 'block'
            addMaquina.style.display = 'none'
        }
    }
    function fechar2(){
        sumiuPesquisa2.style.display = 'block'
        divMaquina.style.display = 'none'
        addMaquina.style.display = 'block'
    }
    function abrirEditar2(){
        sumiuPesquisa2.style.display = 'none'
        editarMaquina.style.display = 'block'
        addMaquina.style.display = 'none'
    }
    function fecharEditar2(){
        sumiuPesquisa2.style.display = 'block'
        editarMaquina.style.display = 'none'
        addMaquina.style.display = 'block'
    }


    function abrirParametros(){
        globalParametros.style.display = "block";
        sobrepor.style.filter = "blur(2px)";
        sobrepor.style.opacity = 0.2;
    }

    function fecharParametros(){
        globalParametros.style.display = "none";
        sobrepor.style.filter = "blur(0px)";
        sobrepor.style.opacity = "1"; 
    }
    function abrir3(){
        sumiuPesquisa3.style.display = 'none'
        divParametro.style.display = 'block'
        addParametro.style.marginLeft = '120px'
        addParametro.style.display = 'none'
    }
    function fechar3(){
        sumiuPesquisa3.style.display = 'block'
        divParametro.style.display = 'none'
        addParametro.style.marginLeft = '40px'
        addParametro.style.display = 'block'
    }
    function abrirEditar3(){
        sumiuPesquisa3.style.display = 'none'
        editarParametro.style.display = 'block'
        addParametro.style.display = 'none'
    }
    function fecharEditar3(){
        sumiuPesquisa3.style.display = 'block'
        editarParametro.style.display = 'none'
        addParametro.style.display = 'block'
    }
    function abrirChat (){
        if(chat.style.display == 'none'){
    
          chat.style.display = 'block'
        }else {
          chat.style.display = 'none'
    
        }
        }
</script>
</html>
